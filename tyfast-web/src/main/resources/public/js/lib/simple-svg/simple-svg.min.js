/**
 * 简单、实用的SVG API
 * @Author TyCode
 */
class SimpleSVG{ratio=1
step=.1
minRatio=.3
maxRatio=5
constructor(t,e,i,s,h,a,n){this.ratio=s||this.ratio,this.step=h||this.step,this.minRatio=a||this.minRatio,this.maxRatio=n||this.maxRatio,this.snap=Snap(t),Snap.load(e,t=>{this.snap.append(t),this.svg=this.snap.select("svg").drag(),this.bindWheel(this.snap.node),this.scale(this.ratio),(i=i||function(){})(this.svg,this.snap)})}bindWheel(t){this.wheelEvent=t=>{t.preventDefault(),this.step=t.deltaY<0?Math.abs(this.step):-1*Math.abs(this.step),this.ratio+=this.step,this.scale()},t.addEventListener("wheel",this.wheelEvent)}scale(t){var e,i
return this.ratio=t||this.ratio,this.ratio>this.minRatio&&this.ratio<this.maxRatio?(e=(i=this.svg.attr("transform").localMatrix).e,i=i.f,this.svg.attr({transform:"t"+e+","+i+"s"+this.ratio+",0,0"})):(t=this.ratio+this.step,this.ratio=t<this.minRatio?this.minRatio:t>this.maxRatio?this.maxRatio:t),this}getElement(t){return this.svg.select(t)}getAllElement(t){return this.svg.selectAll(t)}setText(t,e){return this.getElement(t).node.textContent=e||"",this}getText(t){return this.getElement(t).node.textContent}show(t){return this.getElement(t).attr({opacity:1}),this}showAll(t){return this.getAllElement(t).attr({opacity:1}),this}hide(t){return this.getElement(t).attr({opacity:0}),this}hideAll(t){return this.getAllElement(t).attr({opacity:0}),this}toggle(t){let e=this.getElement(t).attr("opacity")
return e=isNaN(e)?1:parseFloat(e),(e=e<.5)?this.show(t):this.hide(t),this}fill(){return this.svg.attr({preserveAspectRatio:"none"}),this}disableDrag(){return this.svg.undrag(),this}enableDrag(){return this.svg.drag(),this}disableScale(){return this.snap.node.removeEventListener("wheel",this.wheelEvent),this}enableScale(){return this.bindWheel(this.snap.node),this}}