/**
 * 简单、实用的SVG API
 * @Author TyCode
 */
class SimpleSVG{ratio=1
step=.1
minRatio=.3
maxRatio=5
constructor(t,i,s,e,h,a,n){this.ratio=e||this.ratio,this.step=h||this.step,this.minRatio=a||this.minRatio,this.maxRatio=n||this.maxRatio,this.snap=Snap(t),Snap.load(i,t=>{this.snap.append(t),this.svg=this.snap.select("svg").drag(),this.bindWheel(this.snap.node),this.scale(this.ratio),(s=s||function(){})(this.svg,this.snap)})}bindWheel(t){this.wheelEvent=t=>{t.preventDefault(),this.step=t.deltaY<0?Math.abs(this.step):-1*Math.abs(this.step),this.ratio+=this.step,this.scale()},t.addEventListener("wheel",this.wheelEvent)}scale(t){var i,s
return this.ratio=t||this.ratio,this.ratio>this.minRatio&&this.ratio<this.maxRatio?(i=(s=this.svg.attr("transform").localMatrix).e,s=s.f,this.svg.attr({transform:"t"+i+","+s+"s"+this.ratio+",0,0"})):(t=this.ratio+this.step,this.ratio=t<this.minRatio?this.minRatio:t>this.maxRatio?this.maxRatio:t),this}zoomIn(){this.step=Math.abs(this.step),this.ratio+=this.step,this.scale()}zoomOut(){this.step=-1*Math.abs(this.step),this.ratio+=this.step,this.scale()}getElement(t){return this.svg.select(t)}getAllElement(t){return this.svg.selectAll(t)}setText(t,i){return this.getElement(t).node.textContent=i||"",this}getText(t){return this.getElement(t).node.textContent}show(t){return this.getElement(t).attr({opacity:1,"fill-opacity":1,visibility:null}),this}showAll(t){return this.getAllElement(t).attr({opacity:1,"fill-opacity":1,visibility:null}),this}hide(t){return this.getElement(t).attr({opacity:0,"fill-opacity":0,visibility:"hidden"}),this}hideAll(t){return this.getAllElement(t).attr({opacity:0,"fill-opacity":0,visibility:"hidden"}),this}toggle(t){let i=this.getElement(t).attr("opacity")
return i=null==i?this.getElement(t).attr("fill-opacity"):i,i=isNaN(i)?1:parseFloat(i),(i=i<.5)?this.show(t):this.hide(t),this}fill(){return this.svg.attr({preserveAspectRatio:"none"}),this}disableDrag(){return this.svg.undrag(),this}enableDrag(){return this.svg.drag(),this}disableScale(){return this.snap.node.removeEventListener("wheel",this.wheelEvent),this}enableScale(){return this.bindWheel(this.snap.node),this}}